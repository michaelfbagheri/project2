<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<!-- Javascript link -->
	<script src="/js/googlemaps.js"></script>
	<script src="/js/main.js"></script>
	<!-- Firebase link -->
	<script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>
	<!-- Fontawesome link -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
	 crossorigin="anonymous">
	<!-- CSS  -->
	<link rel="stylesheet" type="text/css" href="/css/styles.css" />
	<link href="https://fonts.googleapis.com/css?family=Raleway:400,900" rel="stylesheet">

	<title>{{title}}</title>
	<script src="https://code.jquery.com/jquery.js"></script>
</head>

<body class="hero">
	<div class="wrapper">
		<nav class="navbar navbar-expand-md navbar-dark bg-dark">
			<a class="navbar-brand" href="#">
				<div class="logo">
					<i class="fas fa-grin-tongue-wink"></i>
					</span> wi-Party </span>
				</div>
			</a>
			<button class="navbar-toggler .navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
			 aria-controls="navbarsExampleDefault" aria-expanded="true" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse justify-content-end" id="navbarsExampleDefault">
				<ul class="navbar-nav align-items-end">
					<li class="nav-item active">
						<button type="button" id="host-button-enable" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Host</button>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="#">Sign in<span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item active">
						<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">Sign up</button>
					</li>
					<li>
						<div id="current-username"></div>
					</li>
				</ul>
			</div>
		</nav>
		{{{ body }}}
	</div>
	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Create Your Party</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form class="party-create" id="new-record-form">
						<input type="text" class="form-control" name="event_name" value="" id="event-name" placeholder="event name">
						<input type="text" class="form-control" name="event_name" value="" id="event-description" placeholder="event description">
						<input type="text" class="form-control" name="event_address" value="" id="event-address" placeholder="event address">
						<input type="text" class="form-control" name="event_address" value="" id="event-zip" placeholder="event ZIP">
						<input type="text" class="form-control" name="event_date" value="" id="event-date" placeholder="event date">
						<input type="text" class="form-control" name="event_time" value="" id="event-time" placeholder="event time">
						<button type="submit" class="btn btn-primary" id="text-enter-button">Submit</button>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal 2 -->
	<div class="modal fade" id="myModal">
		<div class="modal-dialog modal-sm">
			<div class="modal-content">

				<!-- Modal Header -->
				<div class="modal-header">
					<h4 class="modal-title">Modal Heading</h4>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>


				<!-- Modal body -->
				<div class="modal-body">
					<form class="user-create">
						<input type="text" class="name" placeholder="name">
						<!-- Solution 2 Edit: Added input for a customer name -->
						<input type="text" class="email" placeholder="email">
						<input type="text" class="password" placeholder="password">
						<!-- end edit -->
						<button type="submit" class="btn btn-default mt-1">add new user</button>
					</form>
				</div>

				<!-- Modal footer -->
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>

	<!-- Javascript -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCauOYebxJITJGqbj_nxCGS3gdTP4WWcF4&sensor=false&libraries=places&language=en"></script>

	<script>
		let lat, lng;
		const input = document.querySelector('#event-name');
		const autocomplete = new google.maps.places.Autocomplete(input);
		google.maps.event.addListener(autocomplete, 'place_changed', (e) => {
			const place = autocomplete.getPlace();
			lat = place.geometry.location.lat();
			lng = place.geometry.location.lng();
			console.log('lat and lng', lat, lng)
		});

		document.querySelector('#new-record-form').addEventListener('submit', (e) => {
			e.preventDefault();
			const record = {
				title: document.querySelector('#eventName').value,
				description: document.querySelector('#desc-input').value,
				zip: document.querySelector('#zip-input').value,
				lat,
				lng
			}
			console.log('yoooooo', record);
			fetch('/add-record', {
				method: 'POST',
				body: JSON.stringify(record),
				headers: {
					'Content-Type': 'application/json'
				}
			}).then(res => res.json())
				.then(res => {
					console.log('updated file content', res);
				}).catch(res => console.log('dfdfsdfsdfsdfs', err))
		});
	</script>
</body>

</html>